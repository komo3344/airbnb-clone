container_commands:
  01_upgrade-pip:
    command: "pip install --upgrade pip"
  02_upgrade_sqlite:
    command: "cd ~ && wget https://www.sqlite.org/2020/sqlite-autoconf-3320100.tar.gz && tar xvfz sqlite-autoconf-3320100.tar.gz && cd sqlite-autoconf-3320100 && ./configure && make && make install"
  03_migrate:
    command: "django-admin migrate"
    leader_only: true
  04_compilemessages:
    command: "django-admin compilemessages"
  05_createsu:
    command: "django-admin createsu"
  06_collectstatic:
    command: "django-admin collectstatic --noinput"
option_settings:
  aws:elasticbeanstalk:container:python:
    WSGIPath: config.wsgi.py
  aws:elasticbeanstalk:application:environment:
    DJANGO_SETTINGS_MODULE: config.settings